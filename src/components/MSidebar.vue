<template>
  <div class="MSidebar">
    <div class="MSidebarBody"></div>
    <div class="MSidebarWrapper">
      <div class="MSidebarHeader">
        <div class="MSidebarHeaderIcon">
          <svg viewBox="0 0 1000 1000">
            <defs>
              <linearGradient
                id="linear-gradient"
                x1="402.1538"
                y1="1277.8733"
                x2="402.1538"
                y2="-164.1914"
                gradientUnits="userSpaceOnUse"
              >
                <stop offset="0.5" stop-color="#e9521d" />
                <stop offset="1" stop-color="#fec605" />
              </linearGradient>
              <linearGradient
                id="linear-gradient-2"
                x1="357.4395"
                y1="1277.8733"
                x2="357.4395"
                y2="-164.1914"
                xlink:href="#linear-gradient"
              />
              <linearGradient
                id="linear-gradient-3"
                x1="504.7447"
                y1="1008.6024"
                x2="504.7447"
                y2="214.0492"
                xlink:href="#linear-gradient"
              />
            </defs>
            <path d="M491.5585,673.8315H455.0862v36.4724h36.4723Z" />
            <path d="M544.9129,673.2324h-36.47v36.4723h36.47Z" />
            <path d="M491.5585,726.6227H455.0862V763.095h36.4723Z" />
            <path d="M544.9129,726.0234h-36.47v36.4724h36.47Z" />
            <path
              d="M302.8787,628.0223q3.6858,2.0122,7.4156,3.9534L501.429,544.5919,310.2943,631.9756Q306.5647,630.0346,302.8787,628.0223Z"
              style="fill: url(#linear-gradient)"
            />
            <polygon
              points="387.648 388.015 327.231 417.887 387.648 388.015 387.648 388.015"
              style="fill: url(#linear-gradient-2)"
            />
            <polygon
              points="960.588 755.819 887.388 722.145 695.507 633.874 501.429 544.592 310.294 631.976 121.727 718.186 39.412 755.819 124.368 727.451 352.797 651.176 501.429 601.546 653.157 652.525 884.946 730.404 960.588 755.819"
            />
            <polygon
              points="327.231 417.887 387.648 388.015 387.648 567.26 435.882 545.208 435.882 309.392 500.852 266.145 500.852 515.279 560.399 542.446 560.399 373.464 629.368 332.216 629.368 573.67 725.032 617.349 830.503 665.506 733.281 612.156 686.185 586.312 686.185 346.012 630.569 314.105 560.398 356.495 560.398 281.941 502.052 250.033 421.958 301.772 421.958 387.479 393.862 368.814 313.645 408.477 313.645 587.094 272.149 609.502 157.327 671.506 281.172 615.317 327.231 594.419 327.231 417.887"
            />
            <polygon
              points="485.852 294.149 450.882 317.427 450.882 336.067 485.852 314.615 485.852 294.149"
              style="fill: #e9521d"
            />
            <polygon
              points="450.882 396.233 450.882 416.83 485.852 397.378 485.852 376.781 450.882 396.233"
              style="fill: #e9521d"
            />
            <polygon
              points="485.852 334.84 450.882 354.292 450.882 376.009 485.852 356.557 485.852 334.84"
              style="fill: #e9521d"
            />
            <polygon
              points="450.882 539.208 485.852 522.279 485.852 499.253 450.882 518.705 450.882 539.208"
              style="fill: #e9521d"
            />
            <polygon
              points="450.882 498.48 485.852 479.029 485.852 458.179 450.882 477.631 450.882 498.48"
              style="fill: #e9521d"
            />
            <polygon
              points="450.882 457.406 485.852 437.954 485.852 417.603 450.882 437.055 450.882 457.406"
              style="fill: #e9521d"
            />
            <polygon
              points="614.368 481.506 575.399 503.182 575.399 523.534 614.368 501.857 614.368 481.506"
              style="fill: #e9521d"
            />
            <polygon
              points="614.368 440.684 575.399 462.361 575.399 482.958 614.368 461.281 614.368 440.684"
              style="fill: #e9521d"
            />
            <polygon
              points="614.368 522.081 575.399 543.758 575.399 546.446 592.54 555.782 614.368 544.32 614.368 522.081"
              style="fill: #e9521d"
            />
            <polygon
              points="614.368 358.665 575.399 381.971 575.399 400.194 614.368 378.518 614.368 358.665"
              style="fill: #e9521d"
            />
            <polygon
              points="614.368 398.742 575.399 420.419 575.399 442.136 614.368 420.459 614.368 398.742"
              style="fill: #e9521d"
            />
            <polygon
              points="372.648 412.165 342.231 427.204 342.231 445.555 372.648 430.636 372.648 412.165"
              style="fill: #e9521d"
            />
            <polygon
              points="372.648 450.861 342.231 467.78 342.231 489.497 372.648 472.578 372.648 450.861"
              style="fill: #e9521d"
            />
            <polygon
              points="342.231 570.895 372.648 553.976 372.648 533.624 342.231 550.543 342.231 570.895"
              style="fill: #e9521d"
            />
            <polygon
              points="342.231 509.722 342.231 530.319 372.648 513.4 372.648 492.803 342.231 509.722"
              style="fill: #e9521d"
            />
            <path
              d="M902.0181,611.6263c0-.1.0032-.2.0032-.3005a395.8874,395.8874,0,0,0-33.8592-160.7173L739.9574,445.9l122.33-7.951c-64.388-132.5367-200.2937-223.9-357.5426-223.9A395.7938,395.7938,0,0,0,239.5813,315.4975l122.1634,4.4453L225.26,328.9937a399.4884,399.4884,0,0,0-38.2659,43.8414l46.4955,2.2354-51.0628,3.9676a396.306,396.306,0,0,0-49.7318,92.6891l122.752,4.471-127.3134,8.3382a399.7639,399.7639,0,0,0-15.7268,189.51l185.8765-98.2341V396.8265l8.3517-4.1294,80.2168-39.6628L394.6,349.203l7.2,4.7832,4.7955,3.1859V291.27l6.861-4.4318L493.5516,235.1l7.5011-4.8455,7.835,4.2847,58.3461,31.9075,7.8029,4.2672v56.8617l47.414-28.6433,7.56-4.5669,7.6609,4.3952,55.6164,31.9075,7.5356,4.3232V575.1L896.2961,678.8444a399.351,399.351,0,0,0,5.57-56.9313l-58.857-5.1457Z"
              style="fill: url(#linear-gradient-3)"
            />
          </svg>
        </div>
        <div class="MSidebarHeaderContent">
          <div class="MSidebarHeaderCompanyName">شركــة المـودة</div>
          <div class="MSidebarHeaderSystemName">نظام ديرتنا</div>
        </div>
      </div>
      <div class="MSidebarUser">
        <div class="MSidebarUserContent">
          <div class="MSidebarUserName">المستخدم 1</div>
          <div class="MSidebarUserTitle">مدير النظام</div>
        </div>
      </div>
      <div class="MSidebarContent">
        <RouterLink to="/" class="MSidebarItem">
          <div class="MSidebarItemIcon">
            <svg viewBox="0 0 1000 1000">
              <path
                class="st0"
                d="M878.7,457.6L878.7,457.6c-4.3-6.7-9.9-12.3-15.4-17.8l-0.5-0.5c-24.3-24.3-48.6-48.6-72.9-72.9l-2.6-2.6
	c-74-73.9-150.5-150.4-225.7-225.9c-21.5-21.6-42.4-30.3-67.7-28.2c-16.7,1.4-29.8,6.4-41.3,15.6c-4.6,3.7-8.8,7.8-13,12
	C364.5,212.6,289.3,287.8,214.1,363l-38.8,38.8c-4.4,4.4-8.8,8.8-13.2,13.1l-0.1,0.1c-9.7,9.6-19.7,19.6-29.4,29.6
	c-30.3,31.2-31.6,74.9-3.1,106.2c14.2,15.6,33.2,23.8,56.5,24.2c5.3,0.1,5.9,1.3,5.8,6.6c-0.2,26.7-0.2,53.9-0.1,80.1
	c0,8.7,0,17.3,0,26.2l0,1.3l0,22.3c0,28.6,0,58.3,0,87.8c0,1.6,0.2,3.3,0.4,4.7c0.2,1.2,0.3,2.5,0.3,3.6
	c0.3,21.1,9.9,42.3,26.4,58.2c16.6,16,38.1,24.8,60.7,24.8c0.6,0,1.2,0,1.8,0c26.8-0.5,53.8-0.4,79.8-0.3l7.2,0
	c9.3,0,19.9,0.1,30,0.1c22,0,31.8-9.9,31.8-32c0-20.6,0-41.3,0-61.9v-0.4c0-36.8,0-74.9,0-112.9c0-20.7,13.8-34.7,34.3-34.9
	c16.1-0.1,32.6-0.1,47.1-0.1l5.1,0c6.5,0,13,0,19.5,0c5.6,0,9.7,0.7,13.3,2.4c13.9,6.3,20.9,17.6,20.9,33.5c0,27.4,0,54.8,0,82.3
	v2.4c0,30.7,0,61.4,0,92.1c0,18.7,10.8,29.5,29.7,29.5l22.6,0c32.6,0,66.3,0.1,99.9-0.1c34.2-0.1,66-21.7,79.3-53.8
	c6.2-14.9,7-30.1,7.1-44.3c0.1-48.1,0.1-97.7,0.1-141.4V650c0-20.8,0-41.7,0-62.5l0-2.8c0-3.4,0-7.9,0.5-9c0.8-0.3,3.7-0.5,5.4-0.6
	c1.7-0.1,3.9-0.2,6.4-0.4c29.2-2.6,50.7-17.1,61.9-41.7C895.1,506.9,893.5,480.8,878.7,457.6z M754.8,636l0,4.4c0,12,0,24,0,35.9
	c0,14.9,0,29.8,0,44.8c0,25.9,0,51.7,0,77.6c0,12-3.5,21.7-10,28.3c-6.6,6.5-16.4,10-28.5,10.1c-10.1,0-20.4,0-31,0l-2.5,0
	c-17.3,0-35.1,0-52.6,0.2l-0.4,0c-2.3,0-3.7-0.3-4.3-0.9c-0.6-0.6-0.9-2.2-0.9-4.7c0.2-42.8,0.2-86.2,0.1-128.1l0-16.2
	c0-26-7.3-46.8-22.4-63.5c-17-19-38.2-29-62.9-29.7c-11.5-0.3-23.7-0.4-37.3-0.4c-15.3,0-29.8,0.2-40.7,0.4
	c-43.3,0.7-80.6,35.4-84.8,79c-0.6,6.8-1,14-1,22.2c0,10.8,0,21.6,0,32.3l0,2.2c0,33.4,0,68,0.1,102.3c0,2.4-0.3,3.9-0.8,4.5
	c-0.4,0.4-1.4,0.8-4.2,0.8c-16.6-0.2-33.5-0.2-48.5-0.1l-3.1,0c-11.8,0-24,0-36.1,0c-23.1-0.1-37.4-14.6-37.4-37.8
	c0-51.5,0-103.1,0-154.6v-2.5c0-29.5,0-59,0-88.4c0-22.7-9.6-32.4-32.1-32.4c-2.6,0-5.2,0-7.8,0l-1.9,0c-5.7,0-11.6,0-17.4-0.1
	c-10.8-0.2-17.9-4.6-21.6-13.3c-3.9-9.1-2-17.3,5.8-25.1l64-64c81.1-81.1,165-165,249.1-249c10.5-10.5,22.5-10.4,33.1,0.1
	c110.9,110.8,220.2,220.1,312.5,312.5c8.1,8.1,10.2,16.7,6.1,25.6c-4,8.8-11.3,13.1-22.3,13.1l-4,0c-8.6,0-17.6-0.1-26.5,0
	c-17.2,0.3-27.9,11-27.9,28.2C754.8,578.3,754.8,607.6,754.8,636z"
              />
            </svg>
          </div>
          <div class="MSidebarItemText">الرئيسية</div>
        </RouterLink>

        <div
          class="MSidebarItemsGroup"
          v-for="(group, index) in groups"
          :key="index"
          :class="{ ActiveMSidebarItemsGroup: activeGroup === index }"
        >
          <div
            class="MSidebarItemsGroupHeader"
            @click="toggleGroup(index)"
            v-if="hasPermission(group.permission)"
          >
            <div class="MSidebarItemsGroupHeaderIcon">
              <svg viewBox="0 0 1000 1000">
                <path
                  d="M32.5751,788.7824V211.2176c.4424-2.07.9516-4.1287,1.3177-6.2124Q50.8071,108.7208,134.4761,58.4338c23.7386-14.21,49.8239-21.72,76.868-26.3343H787.783c1.7622.4128,3.5055.95,5.2892,1.2207,102.05,15.4958,174.7022,104.653,174.3515,203.2226-.6249,175.6362-.17,351.2762-.1917,526.9147a185.3023,185.3023,0,0,1-1.6414,28.1843c-9.6307,62.972-41.3242,111.4826-94.547,146.026-25.4118,16.493-53.658,25.2666-83.2606,30.2327H211.3441c-1.7579-.4124-3.4994-.9221-5.2761-1.2232q-94.12-15.9526-144.8625-96.9542C45.6806,844.879,37.392,817.4412,32.5751,788.7824ZM91.6473,500q0,115.1454.0264,230.2907c.0107,14.6025-.04,29.1733,1.3085,43.79,5.0006,54.2107,32.046,93.3735,79.5649,118.7788,23.1418,12.3723,48.438,15.74,74.1462,15.7673q238.9617.2537,477.9239.0531c16.3955-.0057,32.7623.04,49.1782-1.2934,32.7849-2.6628,61.1831-14.98,85.4227-36.8613,34.2976-30.9615,48.22-70.6964,48.2367-116.0187q.0893-240.7995-.0054-481.599c-.0049-15.8191-.0246-31.6078-1.2774-47.4468-2.5988-32.8552-14.8543-61.3264-36.6519-85.6488-30.8453-34.4182-70.4837-48.4683-115.7178-48.4912Q512.56,91.1985,271.318,91.3151c-15.1811.0042-30.3311-.0277-45.5289,1.3072-47.8046,4.199-84.3857,26.751-110.8138,66.4126-17.3366,26.0175-23.1453,55.39-23.237,86.0015C91.4837,330.0237,91.65,415.0122,91.6473,500Z"
                />
                <path
                  d="M587.0957,265.3569c54.6981-.0018,109.3974.1832,164.093-.1844,9.0949-.0612,12.4315,2.4838,11.9283,11.8344-.7187,13.3585-.354,26.7859-.1506,40.1792.0889,5.852-2.25,8.1651-8.0753,8.0745-13.0632-.2032-26.1323-.0257-39.199-.0253q-145.4056.0047-290.8114-.0057c-13.5256-.0017-13.5433-.0394-13.569-13.4669-.0228-11.8744.4232-23.7691-.1419-35.6163-.4-8.3807,2.6125-10.9839,10.9215-10.94C477.0915,265.5,532.0939,265.3586,587.0957,265.3569Z"
                />
                <path
                  d="M587.1657,529.9366c-54.6981.0018-109.3973-.1816-164.0929.1832-9.0737.06-12.45-2.4475-11.943-11.82.7229-13.358.3541-26.7857.1515-40.179-.0883-5.84,2.2229-8.1858,8.0615-8.0881,12.4552.2084,24.9167.0254,37.3756.025q146.3172-.0047,292.6345.0057c13.5394.0016,13.5571.0391,13.5831,13.4527.0231,11.8743-.4193,23.7687.1411,35.6163.3954,8.3588-2.5759,11-10.9064,10.9549C697.17,529.7916,642.1676,529.9348,587.1657,529.9366Z"
                />
                <path
                  d="M588.0447,674.77c54.3941-.0015,108.7895.1889,163.181-.1875,9.1519-.0633,12.3811,2.5816,11.8891,11.8744-.7074,13.36-.3541,26.7862-.1485,40.1794.09,5.8857-2.3205,8.1074-8.1119,8.0382-15.4953-.1852-30.9945-.0264-46.4922-.0259q-141.7592.0051-283.5183-.0059c-13.49-.0018-13.5071-.04-13.5324-13.5036-.0222-11.8743.433-23.77-.144-35.616-.4111-8.4377,2.7068-10.9427,10.96-10.9C477.4324,674.9085,532.7389,674.7713,588.0447,674.77Z"
                />
                <path
                  d="M295.2566,236.1331c10.0285,0,20.06-.1683,30.0845.038,16.6164.342,28.7024,12.33,28.9028,28.98q.3627,30.14,0,60.2867c-.2005,16.6494-12.2863,28.7583-28.9037,28.9591q-30.0808.3635-60.1692,0c-16.6168-.2008-28.7023-12.31-28.9026-28.96q-.3627-30.14,0-60.2867c.2-16.6493,12.2871-28.6367,28.9038-28.9785C275.1963,235.9649,285.2282,236.1331,295.2566,236.1331Z"
                />
                <path
                  d="M295.21,559.16c-10.0284-.0009-20.06.1708-30.0845-.04-16.5984-.3484-28.6626-12.3576-28.8591-29.0235q-.3555-30.14.0037-60.2867c.2044-16.6315,12.3138-28.7185,28.9473-28.9154q30.081-.3561,60.1691.0037c16.5992.2048,28.6626,12.3378,28.8591,29.0037q.3553,30.14-.0038,60.2867c-.2043,16.6316-12.3143,28.5991-28.9472,28.9346C315.27,559.3261,305.2385,559.1611,295.21,559.16Z"
                />
                <path
                  d="M295.2561,763.8668c-10.0284,0-20.06.1682-30.0845-.0379-16.6165-.3418-28.7029-12.33-28.9033-28.979q-.3627-30.14,0-60.2867c.2-16.65,12.2861-28.7589,28.9031-28.96q30.081-.3634,60.1692,0c16.617.2008,28.7028,12.31,28.9032,28.9595q.3628,30.14,0,60.2867c-.2,16.65-12.2866,28.6373-28.9031,28.9791C315.3165,764.035,305.2846,763.8668,295.2561,763.8668Z"
                />
              </svg>
            </div>
            <div class="MSidebarItemsGroupHeaderText">{{ group.text }}</div>
            <div class="MSidebarItemsGroupHeaderArrow">
              <svg viewBox="0 0 1000 1000">
                <polygon
                  points="333.8,75.7 241.9,167.7 574.2,500 241.9,832.3 333.8,924.3 758.1,500 "
                />
              </svg>
            </div>
          </div>
          <div class="MSidebarItems" v-if="hasPermission(group.permission)">
            <div v-for="(item, i) in group.items">
              <RouterLink
                :key="i"
                :to="item.route"
                class="MSidebarItem"
                v-if="hasPermission(item.permission)"
              >
                <div class="MSidebarItemIcon">
                  <svg viewBox="0 0 1000 1000">
                    <!-- Item Icon -->
                  </svg>
                </div>
                <div class="MSidebarItemText">{{ item.text }}</div>
              </RouterLink>
            </div>
          </div>
        </div>
      </div>
      <div class="MSidebarFooter">
        <div style="display: none" class="MSidebarItem">
          <div class="MSidebarItemIcon">
            <svg viewBox="0 0 1000 1000">
              <path
                d="M499.1,774.1c-88.5,0-177.1,0-265.6,0c-36.6,0-65-22.9-72.1-58.7c-3.5-17.8,0.3-34.5,9.5-50.3c10.3-17.8,21.2-35.4,29.8-54
	c13.9-30,19-62,18.9-95.1c-0.1-55-1-110.1,1.3-165c3-71.1,31.9-131.8,82.6-181.4c61.9-60.5,137.1-86.7,223.1-79.1
	c123.8,10.8,227.1,107.5,247.5,230.8c2.9,17.7,4.2,35.8,4.5,53.8c0.6,47.6,0.5,95.1,0.1,142.7c-0.3,44.7,11.3,85.9,34.5,123.9
	c4.5,7.3,8.8,14.8,13.2,22.1c14.7,24.3,16.2,49.3,2.2,74.1c-14,24.8-36.3,36.3-64.7,36.3C675.6,774.1,587.4,774.1,499.1,774.1z
	 M498.8,724.3c6,0,12,0,18,0c81.9,0,163.9,0,245.8,0c22.5,0,31.8-16.6,20.4-36c-6-10.1-12.2-20.1-17.9-30.3
	c-21.3-37.7-34.4-78-35.4-121.4c-1.2-53.8-0.5-107.7-1.3-161.5c-0.3-17.7-1-35.7-4.5-52.9C692,167.3,516,89.9,381,172.2
	c-69.9,42.6-107.7,106.2-110.6,188.4c-1.8,51.5-0.6,103.1-0.6,154.7c0.1,55.1-13.7,106.3-42.6,153.3c-4.9,8-10,16-14.4,24.4
	c-5.7,10.8-1.2,24.5,9.7,28.9c4.6,1.8,10,2.3,15.1,2.3C324.6,724.3,411.7,724.3,498.8,724.3z"
              />
              <path
                d="M499,909.4c-47.8-1.4-89.7-16.4-121.7-53.6c-10-11.7-9.6-27,0.5-36.2c10.4-9.5,26.1-9,35.9,2.5
	c17.4,20.4,39.5,32.2,65.6,35.5c39.7,5.1,75.8-2.6,103.8-34c11-12.4,26.1-14,37.2-4.3c10.7,9.4,10.9,25.1,0,37.5
	C588.2,893.5,546.4,908.1,499,909.4z"
              />
            </svg>
          </div>
          <div class="MSidebarItemText">الاشعارات</div>
        </div>

        <div class="MSidebarItem" id="Logout" @click="Logout">
          <div class="MSidebarItemIcon">
            <svg viewBox="0 0 1000 1000">
              <path
                d="M499.783,889.4152c-185.4878-.0084-347.79-131.2675-382.25-312.6977C89.05,426.7569,135.4806,300.8418,248.4483,199.0189c15.2988-13.79,31.65-12.6855,41.1928,1.8028,7.5262,11.4265,5.8478,24.4553-5.2,33.7488-25.8683,21.7614-48.6,46.3052-67.2656,74.5093-40.2683,60.8465-59.4815,127.9264-56.9838,200.7136,5.246,152.88,110.9179,282.99,258.3084,319.165,184.4186,45.2631,370.8832-68.0406,411.8828-253.8468C860.0688,440.58,820.1783,326.8807,715.1523,236.88c-8.6862-7.4436-12.6831-16.25-9.9581-27.0859,2.5558-10.1634,9.8033-16.5587,20.1891-18.8074,8.0513-1.7433,14.9683,1.0632,21.1123,6.1273,65.2878,53.8128,109.81,121.127,131.3356,203.16,56.7635,216.3233-80.7051,437.0562-300.03,481.14-25.5624,5.138-51.8115,6.86-77.7424,10.1653Z"
              />
              <path
                d="M525.0742,316.1518q-.0014,91.2684-.0266,182.5368c-.0117,12.4775-8.976,23.2932-20.5322,25.2316a25.28,25.28,0,0,1-28.4692-16.9754,29.04,29.04,0,0,1-1.2871-9.2238q-.0927-181.3564-.0405-362.7131c.0028-15.3327,10.5229-26.4912,24.87-26.5859,14.8642-.0981,25.4657,10.9636,25.4737,26.7667Q525.1084,225.67,525.0742,316.1518Z"
              />
            </svg>
          </div>
          <div class="MSidebarItemText">تسجيل خروج</div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { useAuthStore } from '../stores/auth'
import { ref } from 'vue'
export default {
  setup() {
    const authStore = useAuthStore()
    const activeGroup = ref(null)

    const groups = ref([
      //============= التسويق ===============
      {
        text: 'العقود',
        permission: 'ads_view_all',
        items: [
          {
            text: 'ادخال عقد جديد',
            route: '/contracts/add',
            permission: 'ads_video_view',
          },
          {
            text: 'العقارات',
            route: '/real_estates',
            permission: 'information',
          },
        ],
      },
      //============= المعلومات =============
      {
        text: 'المعلومات',
        permission: 'information',
        items: [
          {
            text: 'معلومات الاشخاص',
            route: '/persons',
            permission: 'information',
          },
        ],
      },
      //============= الانترنت ===============
      {
        text: 'الانترنت',
        permission: 'internet_view_all',
        items: [
          {
            text: 'بيانات المشتركين',
            route: '/internet/subscribers',
            permission: 'subscribers_view',
          },
          {
            text: 'الاشتراكات',
            route: '/internet/profile',
            permission: 'profile_view',
          },
        ],
      },
      //============= الاعلانات ===============
      {
        text: 'الاعلانات',
        permission: 'ads_view_all',
        items: [
          {
            text: 'فيديوات المدن',
            route: '/ads/video',
            permission: 'ads_video_view',
          },
          {
            text: 'الاعلانات الواجهة الرئيسية',
            route: '/ads/main',
            permission: 'ads_main_view',
          },
          {
            text: 'الاعلانات الخدمات',
            route: '/ads/services',
            permission: 'ads_ser_view',
          },
          {
            text: 'الاعلانات  المولد',
            route: '/ads/energy',
            permission: 'ads_ene_view',
          },
          {
            text: 'الاعلانات الفديو',
            route: '/ads/Home-secondVideo',
            permission: 'ads_ene_view',
          },
          {
            text: 'ارسال اشعار',
            route: '/ads/send-deeratna-notification',
            permission: 'send-deeratna-notification',
          },
        ],
      },
      //============= الطلبات ===============
      {
        text: 'الطلبات',
        permission: 'request_view',
        items: [
          {
            text: 'ادارة المعلومات',
            route: '/information-requests',
            permission: 'info_view',
          },
          {
            text: 'بطاقات الدخول',
            route: '/nfc-cards-requests',
            permission: 'entry_card_view',
          },
          {
            text: 'ملصق السيارة',
            route: '/cars-label-requests',
            permission: 'car_label_view',
          },
          {
            text: 'الانترنيت',
            route: '/internet-requests',
            permission: 'internet_requests_view',
          },
        ],
      },
      //============= الدفع الالكتروني' ======
      {
        text: 'الدفع الالكتروني',
        permission: 'on_pay_view',
        items: [
          {
            text: 'الاقساط',
            route: '/installment-payment',
            permission: 'on_pay_inst',
          },
          {
            text: 'الخدمات',
            route: '/services-payment',
            permission: 'on_pay_ser',
          },
          {
            text: 'المولد',
            route: '/electricity-payment',
            permission: 'on_pay_ene',
          },
          //  { text: "طلب بطاقات الدخول", route: "/nfccardadd-payment", permission: "on_pay_nfcadd" },
          {
            text: 'بطاقات الدخول',
            route: '/nfccard-payment',
            permission: 'on_pay_nfcrenew',
          },
          // { text: "طلب ملصق السيارة", route: "/carlabeladd-payment", permission: "on_pay_caradd" },
          {
            text: ' ملصق السيارة',
            route: '/carlabele-payment',
            permission: 'on_pay_carrenew',
          },
          {
            text: 'الانترنيت',
            route: '/internet-payment',
            permission: 'on_pay_internet',
          },
        ],
      },
      //============= الكمب =================
      {
        text: 'الكمب',
        permission: 'camps',
        items: [
        {
            text: 'الكمبات',
            route: '/camps',
            permission: 'camps',
          },
          {
            text: 'المتعهدين',
            route: '/camps/contractors',
            permission: 'camps',
          },
          {
            text: 'العمال',
            route: '/camps/workers',
            permission: 'camps',
          },
        ],
      },
      //============= خطار ==================
      {
        text: 'خطار',
        permission: 'qr_view',
        items: [
          {
            text: 'معلومات المشتركين',
            route: '/qr-customers',
            permission: 'qr_customers',
          },
          {
            text: 'بيانات ال QR',
            route: '/qr-data',
            permission: 'qr_security',
          },
          {
            text: 'الاشعارات',
            route: '/qr-notification',
            permission: 'qr_notification',
          },
          {
            text: 'ارسال اشعار',
            route: '/send-qr-notification',
            permission: 'send-qr-notification',
          },
        ],
      },
      //============= المستخدمين=============
      {
        text: 'المستخدمين',
        permission: 'users_view',
        items: [
          { text: 'المستخدمين', route: '/users', permission: 'users_view' },
        ],
      },
    ])

    const hasPermission = permission => {
      return authStore.user && authStore.user.permissions.includes(permission)
    }

    const toggleGroup = index => {
      activeGroup.value = activeGroup.value === index ? null : index
    }

    return {
      groups,
      activeGroup,
      toggleGroup,
      hasPermission,
    }
  },
  methods: {
    Logout() {
      const authStore = useAuthStore()
      authStore.logout()
      this.$router.push({ name: 'Login' })
    },
  },
}
</script>

<style>
:root {
  --MSideBarBGColor: #fff;
  --MSideBarItemHover: rgba(25, 118, 210, 0.1);
  --MSidebarItemsGroupHeader: rgba(0, 0, 0, 0.05);
  --MSidebarItemsGroupHeaderActive: rgba(0, 0, 0, 0.05);
}

.DarkMode {
  --MSideBarBGColor: #2f3349;
  --MSideBarItemHover: rgba(25, 118, 210, 0.1);
  --MSidebarItemsGroupHeader: rgba(255, 255, 255, 0.05);
  --MSidebarItemsGroupHeaderActive: rgba(255, 255, 255, 0.05);
}

.MSidebar {
  display: flex;
  width: 250px;
  height: 100vh;
  transition-duration: 0.3s;
  overflow: hidden;
  position: absolute;
  box-shadow: -5px 0 5px 0px rgba(0, 0, 0, 0.1);
  z-index: 10;
}

.MSidebar ::-webkit-scrollbar {
  width: 0;
}

.CollapsedMSidebar {
  transform: translateX(100%);
}

.MSidebarBody {
  display: flex;
  position: fixed;
  width: 0;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: -1;
}

.MSidebarWrapper {
  display: flex;
  width: 100%;
  height: 100%;
  flex-wrap: wrap;
  justify-content: center;
  align-content: start;
  background-color: var(--MSideBarBGColor);
}

.MSidebarHeader {
  display: flex;
  width: calc(100% - 6px);
  margin: 10px 0;
  padding: 0 0 0 5px;
  flex-wrap: nowrap;
  align-items: center;
  cursor: pointer;
}

.MSidebarHeaderIcon {
  display: flex;
  width: 50px;
  height: 50px;
  min-width: 50px;
  min-height: 50px;
  background-color: rgba(0, 0, 0, 0);
  padding: 5px 0 5px 5px;
  border-radius: 5px;
  margin-left: 0;
}

.MSidebarHeaderIcon svg {
  display: flex;
  width: 100%;
  height: 100%;
  fill: var(--TextColor);
}

.MSidebarHeaderContent {
  display: flex;
  width: calc(100% - 50px);
  flex-wrap: wrap;
  line-height: 1.6;
  overflow: hidden;
}

.MSidebarHeaderCompanyName {
  display: flex;
  width: 100%;
  color: var(--TextColor);
  line-height: 1.4;
  font-family: 'MFontB';
  font-size: 15px;
  white-space: nowrap;
}

.MSidebarHeaderSystemName {
  display: flex;
  width: 100%;
  color: var(--TextColor);
  font-family: 'MFontR';
  font-size: 14px;
  white-space: nowrap;
}

.MSidebarUserContent {
  display: flex;
  flex-wrap: wrap;
  flex: 1;
  align-items: center;
  transition-duration: 0.5s;
  overflow: hidden;
  margin-right: 15px;
}

.MSidebarUserName {
  font-family: 'MFontB';
  font-size: 14px;
  display: flex;
  color: #fff;
  white-space: nowrap;
  width: 100%;
}

.MSidebarUserTitle {
  font-family: 'MFontR';
  font-size: 13px;
  display: flex;
  color: #fff;
  white-space: nowrap;
  width: 100%;
}

.MSidebarUser {
  display: flex;
  flex-wrap: wrap;
  height: 53px;
  width: 100%;
  background-color: var(--PrimaryColor);
  margin: 5px 0;
  justify-content: center;
  align-items: center;
}

.MSidebarItemsGroup {
  display: flex;
  width: calc(100% - 14px);
  flex-wrap: wrap;
  overflow: hidden;
  margin-bottom: 6px;
  border-radius: 5px;
  background-color: var(--MSidebarItemsGroupHeader);
}

.MSidebarItemsGroupHeader {
  display: flex;
  width: 100%;
  flex-wrap: nowrap;
  align-items: center;
  margin: 0;
  padding: 7.5px;
  border-radius: 5px;
  border: 1px solid rgba(0, 0, 0, 0);
  transition-duration: 0.3s;
  cursor: pointer;
  user-select: none;
  outline: 0;
}

.MSidebarItemsGroupHeaderIcon {
  display: flex;
  width: 22px;
  height: 22px;
  min-width: 22px;
  min-height: 22px;
  justify-content: center;
  align-items: center;
  margin-left: 10px;
}

.MSidebarItemsGroupHeaderIcon svg {
  display: flex;
  width: 100%;
  height: 100%;
  fill: var(--TextColor);
}

.MSidebarItemsGroupHeaderText {
  display: flex;
  width: min-content;
  color: var(--TextColor);
  font-family: 'MFontB';
  padding-right: 5px;
  white-space: nowrap;
  font-size: 15px;
  flex: 1;
}

.MSidebarItemsGroupHeaderArrow {
  display: flex;
  width: 15px;
  height: 15px;
  justify-content: center;
  align-items: center;
  transition-duration: 0.3s;
}

.MSidebarItemsGroupHeaderArrow svg {
  display: flex;
  width: 100%;
  height: 100%;
  fill: var(--TextColor);
}

.ActiveMSidebarItemsGroup .MSidebarItemsGroupHeader {
  background-color: var(--MSidebarItemsGroupHeader);
  border-radius: 5px 5px 0 0;
}

.ActiveMSidebarItemsGroup .MSidebarItemsGroupHeaderArrow {
  transform: rotate(90deg);
}

.ActiveMSidebarItemsGroup .MSidebarItemsGroupHeaderText {
  color: var(--TextColor);
}

.ActiveMSidebarItemsGroup .MSidebarItemsGroupHeaderIcon svg {
  fill: var(--TextColor);
}

.ActiveMSidebarItemsGroup .MSidebarItemsGroupHeaderArrow svg {
  fill: var(--TextColor);
}

.ActiveMSidebarItemsGroup .MSidebarItems {
  max-height: 100vh;
  transition: max-height 0.3s ease-in;
}

.MSidebarItems {
  display: flex;
  width: 100%;
  max-height: 0;
  flex-wrap: wrap;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}

.MSidebarContent {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  height: min-content;
  overflow-y: auto;
  overflow-x: hidden;
  margin: 10px 0;
  align-items: center;
  min-height: calc(100% - 260px);
  max-height: calc(100% - 260px);
  justify-content: center;
  align-content: flex-start;
  padding: 5px 0;
}

.MSidebarItem {
  display: flex;
  width: calc(100% - 18px);
  padding: 2px;
  flex-wrap: nowrap;
  align-items: center;
  cursor: pointer;
  text-decoration: none;
  transition-duration: 0.3s;
  border-radius: 5px;
  margin-bottom: 6px;
}

.MSidebarItemIcon {
  display: flex;
  width: 25px;
  height: 25px;
  min-width: 25px;
  min-height: 25px;
  background-color: rgba(255, 255, 255, 0);
  padding: 5px;
  border-radius: 5px;
  margin-left: 10px;
}

.MSidebarItemIcon svg {
  display: flex;
  width: 100%;
  height: 100%;
  fill: var(--TextColor);
  transition-duration: 0.3s;
}

.MSidebarItemText {
  display: flex;
  width: 100%;
  color: var(--TextColor);
  line-height: 1.4;
  font-family: 'MFontB';
  font-size: 15px;
  white-space: nowrap;
  transition-duration: 0.3s;
}

.MSidebarItemsGroup .MSidebarItems {
  justify-content: center;
}

.MSidebarItemsGroup .MSidebarItem {
  display: flex;
  flex-wrap: nowrap;
  width: 100%;
  padding: 7px 10px;
  margin: 0 5px 7px 5px;
  transition-duration: 0.5s;
  cursor: pointer;
  outline: 0;
  user-select: none;
  text-decoration: none;
  position: relative;
  padding-right: 15px;
  box-sizing: border-box;
}
.MSidebarItemsGroup .MSidebarItem:first-child {
  margin-top: 10px;
}

.MSidebarItemsGroup .MSidebarItemIcon {
  display: flex;
  width: 8px;
  height: 8px;
  min-width: 8px;
  min-height: 8px;
  border-radius: 50%;
  justify-content: center;
  align-items: center;
  transition-duration: 0.3s;
  border: 2px solid var(--TextColor);
  padding: 0;
}

.MSidebarItemsGroup .MSidebarItemIcon svg {
  display: flex;
  width: 60%;
  height: 60%;
  fill: var(--TextColor);
  transition-duration: 0.3s;
}

.MSidebarItemsGroup .MSidebarItemText {
  display: flex;
  font-family: 'MFontR';
  color: var(--TextColor);
  font-size: 15px;
  align-items: center;
  margin: 0 8px;
  transition-duration: 0.3s;
  white-space: nowrap;
  overflow: hidden;
  width: 100%;
}

.MSidebarItemsGroup .router-link-active .MSidebarItemIcon {
  border: 2px solid var(--PrimaryColor);
}

.MSidebarItemsGroup .router-link-active svg {
  fill: var(--PrimaryColor);
}

.MSidebarItemsGroup .router-link-active .MSidebarItemText {
  color: var(--PrimaryColor);
}

.MSidebarItem:hover {
  background-color: var(--MSideBarItemHover);
}

.MSidebarItem:hover .MSidebarItemIcon {
  border-color: var(--PrimaryColor);
}

.MSidebarItem:hover .MSidebarItemText {
  color: var(--PrimaryColor);
}

.MSidebarItem:hover svg {
  fill: var(--PrimaryColor);
}

.MSidebar .router-link-active {
  background-color: var(--PrimaryColor);
  box-shadow: 0px 0px 6px 0px rgba(25, 118, 210, 0.8);
}

.MSidebar .router-link-active .MSidebarItemIcon {
  border-color: #fff;
}

.MSidebar .router-link-active svg {
  fill: #fff;
}

.MSidebar .router-link-active .MSidebarItemText {
  color: #fff;
}

.MSidebarFooter {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  height: 90px;
  position: absolute;
  right: 0;
  bottom: 0;
  padding-bottom: 10px;
  align-items: flex-start;
  position: relative;
  justify-content: center;
}

.MSidebarFooter::before {
  display: flex;
  content: '';
  width: calc(100% - 30px);
  height: 1px;
  position: absolute;
  top: -5px;
  background-color: #ccc;
}

@media only screen and (max-width: 700px) {
  .MSidebar:not(.CollapseMSidebar) .MSidebarBody {
    width: 100%;
  }
}
</style>
